
<!--<script src="~/Apps/JSController/Transaction/T74138Controller.js"></script>
<script src="~/Apps/JSService/Transaction/T74138Service.js"></script>-->

<style>
    .omf-modal {
        display: none;
        position: fixed;
        top: 0;
        left: 300px;
        width: 60%;
        height: 50vw;
        background-color: rgba(128, 128, 128, 0.00);
        overflow: auto;
        z-index: 99999;
    }

        .omf-modal .omf-modal-body {
            width: 68.25%;
            padding: 1px;
            margin: auto;
            margin-top: 150px;
            margin-left: 122px;
            background-color: #FFFFFF;
            border-style: ridge;
        }

    nav .nav .btn {
        margin-top: 3px;
    }

    #mainBody {
        margin-top: 20px;
        z-index: 999999;
    }

    table, tr, td {
        border: 1px solid black;
    }

    .ultab34 {
        list-style: none;
        padding: 0;
        /*margin: auto;*/
        margin-left: 222px;
        margin-top: 10px;
    }

    .litab34 {
        float: left;
        border-bottom-width: 0;
        margin: 3px 3px 3px 3px;
        padding: 8px 5px 25px 5px;
        background-color: #C12D2D;
        color: #FFFFFF;
        border-radius: 3px;
        transition: 0.2s;
        margin-right: -2px;
        width: 175px;
        text-align: center;
        height: 0px;
        cursor: pointer;
    }

    .active34 {
        background-color: #CCCCCC;
        color: #000000;
    }

    #mainView34 {
        clear: both;
        padding: 0 1em;
    }

    legend {
        display: block;
        width: auto;
        padding-left: 2px;
        padding-right: 2px;
        border: none;
        margin-bottom: -20px;
    }

    fieldset {
        border: 1px solid #A21217;
        border-radius: 5px;
        padding: 10px;
        /*margin-left: 8%;*/
    }
</style>

<div class="container" ng-app="Ambucare" ng-controller="T74125Controller">
    <div class="col-lg-12 col-md-12 col-sm-12" style="padding: 5px;width: 75%">
        <div class="div_back">
            <div class="head-border">
                <label style="color: white;margin-left: 1%;" ng-repeat="field in entity track by $index" ng-if="field.T_LABEL_NAME=='lblPatDischarge'" class="ng-cloak">{{field.T_LANG2_TEXT}}</label>
            </div>
       
        <!--<fieldset>-->
            <!--<legend ng-repeat="field in entity track by $index" ng-if="field.T_LABEL_NAME=='lblPatDischarge'" class="ng-cloak"><h4>{{field.T_LANG2_TEXT}}</h4> </legend>-->
            <div class="row">
                <div class="col-lg-2 col-md-2 col-sm-2" style="padding-right: 0%;">
                    <label id="lblRequest" ng-repeat="field in entity track by $index" ng-if="field.T_LABEL_NAME=='lblDisReqId'" class="ng-cloak" style="text-align: right; width: 100%; margin-right: 13px">{{field.T_LANG2_TEXT}} </label>
                </div>
                <div class="col-lg-1 col-md-1 col-sm-1">
                    <input type="text" ng-model="obj.RequeID" style="width: 100%; text-align: left" readonly="readonly" />
                </div>
                <div class="col-lg-1 col-md-1 col-sm-1" style="padding-right: 0%;">
                    <label id="lblName" ng-repeat="field in entity track by $index" ng-if="field.T_LABEL_NAME=='lblDisName'" class="ng-cloak" style="text-align: right; width: 100%; margin-right: 13px">{{field.T_LANG2_TEXT}}</label>
                </div>
                <div class="col-lg-3 col-md-3 col-sm-3" style="padding-left: 1%">
                    <input type="text" ng-model="obj.Name" style="width: 100%; text-align: left" readonly="readonly" />
                </div>
                <div class="col-lg-1 col-md-1 col-sm-1" style="padding-right: 0%;">
                    <label id="lblAge" ng-repeat="field in entity track by $index" ng-if="field.T_LABEL_NAME=='lblDisAge'" class="ng-cloak" style="text-align: right; width: 100%;margin-right: 13px">{{field.T_LANG2_TEXT}} </label>
                </div>
                <div class="col-lg-1 col-md-1 col-sm-1" style="padding-left: 1%">
                    <input type="text"  ng-model="obj.Age" style="width: 100%;text-align: left" readonly="readonly" />
                </div>
                <div class="col-lg-1 col-md-1 col-sm-1" style="padding-right: 0%;">
                    <label id="lblMobile" ng-repeat="field in entity track by $index" ng-if="field.T_LABEL_NAME=='lblDisMobile'" class="ng-cloak" style="text-align: right; width: 100%; margin-right: 13px">{{field.T_LANG2_TEXT}}</label>
                </div>
                <div class="col-lg-2 col-md-2 col-sm-2" style="padding-left: 1%">
                    <input type="text" ng-model="obj.Mobile" style="width: 100%; text-align: left" readonly="readonly" />
                </div>
            </div>
            <!--<div class="row">
                <div class="col-lg-2 col-md-2 col-sm-2" style="padding-right: 0%;">
                    <label id="lblAge" style="text-align: right; width: 100%;margin-right: 13px">Age </label>
                </div>
                <div class="col-lg-1 col-md-1 col-sm-1" style="padding-left: 1%">
                    <input type="text" ng-model="obj.Age" style="width: 100%;text-align: left" readonly="readonly" />
                </div>
                <div class="col-lg-2 col-md-2 col-sm-2" style="padding-right: 0%;">
                    <label id="lblAmbulance" style="text-align: right; width: 100%;margin-right: 13px">Ambulance</label>
                </div>
                <div class="col-lg-3 col-md-3 col-sm-3" style="padding-left: 1%">
                    <input type="text" ng-model="obj.Ambulance" style="width: 100%;text-align: left" readonly="readonly" />
                </div>

            </div>-->
            <div class="row">
                <div class="col-lg-2 col-md-2 col-sm-2" style="padding-right: 0%;">
                    <label id="lblDischargeReason" ng-repeat="field in entity track by $index" ng-if="field.T_LABEL_NAME=='lblDischargeReason'" class="ng-cloak" style="text-align: right; width: 100%;margin-right: 13px">{{field.T_LANG2_TEXT}}</label>
                </div>
                <div class="col-lg-10 col-md-10 col-sm-10">
                    <ui-select ng-model="obj.D.selected" id="ddlAmbName" theme="select2" style="width: 100%;" append-to-body="true" on-select="onAmbSearch(obj.k.selected.latitude,obj.k.selected.longitude,obj.k.selected.T_SITE_CODE)" tabindex="15">
                        <ui-select-match placeholder="Select">{{$select.selected.T_LANG2_NAME}}</ui-select-match>
                        <ui-select-choices repeat="D in reasonList | propsFilter: {T_LANG2_NAME: $select.search}">
                            <div ng-bind-html="D.T_LANG2_NAME | highlight: $select.search"></div>
                        </ui-select-choices>
                    </ui-select>
                    <input id="txtdischarge" type="hidden" ng-model="obj.T_DISCH_RSN_CODE" ng-bind="obj.T_DISCH_RSN_CODE=obj.D.selected.T_DISCH_ID" />
                    <!--<input type="hidden" ng-model="obj.T_DISCH_ID"/>-->
                </div>
            </div>
            <div class="row">
                <div class="col-lg-2 col-md-2 col-sm-2" style="padding-right: 0%;">
                    <label id="lblDischargeRemarks" ng-repeat="field in entity track by $index" ng-if="field.T_LABEL_NAME=='lblDischargeRemarks'" class="ng-cloak" style="text-align: right; width: 100%; margin-right: 13px;">{{field.T_LANG2_TEXT}}</label>
                </div>
                <div class="col-lg-10 col-md-10 col-sm-10" style="padding-right: 0%;">
                    <textarea ng-model="obj.T_DISCH_RSN_REMARKS" style="min-width: 98%;max-width:98%; min-height: 40px; max-height: 40px;"></textarea>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-4 col-md-4 col-sm-4" style="text-align: right">

                </div>

                <div class="col-lg-1 col-md-1 col-sm-1">
                    <button ID="btnDischarge" title="Discharge" class="Button Discharge" ng-click="Cure_Click()"></button>
                    <!--<input type="button" ng-repeat="field in entity track by $index" ng-if="field.T_LABEL_NAME=='lblDischarge'" class="ng-cloak" value="{{field.T_LANG2_TEXT}}" ng-click="Cure_Click()" style="background: #c12d2d; color: white; border-radius: 5px; width: 100%"/>-->
                </div>
                <div class="col-lg-1 col-md-1 col-sm-1">
                    <img src="../Images/DischRpt.png" title="Discharge Report" style="height: 35px;cursor: pointer" ng-click="Disc_Report()" />
                    <!--<button ID="btnDischargeReport" title="Discharge Report" class="Button Search" ng-click="Disc_Report()"></button>-->
                    <!--<input type="button" ng-repeat="field in entity track by $index" ng-if="field.T_LABEL_NAME=='lblDischargeReport'" class="ng-cloak" value="{{field.T_LANG2_TEXT}}" ng-click="Disc_Report()" style="background: #3cb371; color: white; border-radius: 5px; width: 100%"/>-->
                </div>
                <div class="col-lg-1 col-md-1 col-sm-1">
                    <img src="../Images/VerifyDischRpt.png" title="Verify Discharge Report" style="height: 35px;cursor: pointer" ng-click="verify()" />
                    <!--<button ID="btnVerifyDischargeReport" title="Verify Discharge Report" class="Button Search" ng-click="verify()"></button>-->
                    <!--<input type="button" ng-repeat="field in entity track by $index" ng-if="field.T_LABEL_NAME=='lblVerifyDischargeReport'" class="ng-cloak" value="{{field.T_LANG2_TEXT}}" ng-click="verify()" style="background: #c12d2d; color: white; border-radius: 5px; width: 100%"/>-->
                </div>
            </div>
        <!--</fieldset>-->
        </div>
        <!--<div class="col-lg-12 col-md-12 col-sm-12">


        </div>-->
        <!--<span>Total Bill :{{obj.Bill}}</span>-->
        <!--<input type="button" value="Show Bill Details" ng-click="BillDetails_Click('BillDetails',obj.Request)" style="background: #c12d2d;color: white"/>
        <input type="button" value="Hospital Admission" ng-click="openHospitalList('HospitalList')" style="background: #c12d2d;color: white"/>
        <input type="button" value="Death" ng-click="Death_Click()" style="background: #c12d2d;color: white"/>-->

    </div>
    <!--</div>-->
    <!--</div>-->
    <div id="HospitalList" class="omf-modal">
        <div class="omf-modal-body" style="height: 150px">
            <div style="text-align: right;background: #c12d2d;color: white" class="col-lg-12"><span style="font-weight: bold" ng-click="closeHospitalList('HospitalList')">X</span></div>

            <div class="col-lg-12" style="margin-top: 10px;">
                <div class="col-lg-3" style="text-align: right"><span style="font-weight: bold;">Hospital : </span></div>
                <div class="col-lg-9">
                    <input type="text" gm-places-autocomplete ng-model="t74041.T_DISCH_DEST" style="width: 70%;" />
                </div>
            </div>
            <div class="col-lg-12" style="margin-top: 10px;">
                <div style="text-align: center">
                    <input type="button" value="Admit" style="background: #c12d2d; color: white; height: 25px;" ng-click="hospitalAddmission()" />
                </div>
            </div>

        </div>
    </div>



    <div class="row">

        <div class="col-lg-12 col-md-12 col-sm-12 ">
            <!--@*for popup start*@-->
            <div id="BillDetails" class="omf-modal">

                <div class="omf-modal-body">

                    <div>

                        <div style="background-color: #c12d2d; color: #ffffff; width: 100%; text-align: center;">
                            <label style="width: 97%">Bill Details</label><input type="button" style="background: url(../../Images/Cancel_White.png); background-size: 15px; background-repeat: no-repeat; background-position: center; width: 3%; padding-bottom: 7px; border-color: #c12d2d" ng-click="CloseReceivePopup('BillDetails')" />
                            <!--@*<input type="text" style="float: right; width: 30%; height: 25px" placeholder="Search...." class="form-control" ng-model="Search"/>*@-->
                        </div>

                    </div>
                    <form class="form-horizontal" ng-submit="Receive()" role="form" name="ReceivepeForm" novalidate>
                        <div class="form-group" ng-class="{'has-error': ReceivepeForm.T_SERVICE_NAME.$touched && ReceivepeForm.T_SERVICE_NAME.$error.required , 'has-success': ServiceTypeForm.T_SERVICE_NAME.$valid }">
                            <div class="col-lg-12 col-md-12 col-sm-12">


                                <table class=" table table-bordered" ng-show="showTable=='Table'">
                                    <thead style="background-color: #C12D2D; color: white; text-align: center;display:table; width: 100%">
                                        <tr>
                                            <th style="width: 70%">Name</th>
                                            <th style="width: 10%">Price</th>
                                            <th style="width: 10%">Vat</th>
                                            <th style="width: 10%">Discount</th>

                                        </tr>
                                    </thead>
                                    <tbody style="height:100px; overflow:auto; overflow-x:hidden; display:block;">
                                        <tr ng-repeat="B in obj.BillDetails" style="display:table;width:100%;	table-layout:fixed;">
                                            <td style="width: 70%">{{B.T_LANG2_NAME}}</td>
                                            <td style="width: 10%">{{B.T_PRICE}}</td>
                                            <td style="width: 10%">{{B.T_VAT}}</td>
                                            <td style="width: 10%">{{B.T_DISCOUNT}}</td>

                                        </tr>
                                    </tbody>
                                    <tr style="background-color: #A21217; color: #ffffff;display:table;width:100%;">
                                        <td style="width: 67%">
                                            <label style="width: 100%; text-align: right">Sub Total</label>
                                        </td>
                                        <td style="width: 11%">
                                            <span>{{obj.SubTotalPrice}}</span>
                                        </td>
                                        <td style="width: 11%">
                                            <span>{{obj.SubTotalVat}}</span>
                                        </td>
                                        <td style="width: 11%">
                                            <span>{{obj.SubTotalDiscount}}</span>
                                        </td>
                                    </tr>
                                    <tr style="display:table;width:100%;">
                                        <td colspan="2" style="width: 90%">
                                            <label style="width: 100%; text-align: right"> Grand Total</label>
                                        </td>
                                        <td style="width: 10%">
                                            <span>{{obj.TotalPrice}}</span>
                                        </td>
                                    </tr>
                                </table>

                                <table class=" table table-bordered">
                                    <thead style="background-color: #C12D2D; color: white; text-align: center;display:table; width: 100%">
                                        <tr>
                                            <th style="width: 70%">Name</th>
                                            <th style="width: 10%">Qty</th>
                                            <th style="width: 10%">UPrice</th>
                                            <th style="width: 10%">TotalPrice</th>

                                        </tr>
                                    </thead>
                                    <tbody style="height:100px; overflow:auto; overflow-x:hidden; display:block;">
                                        <tr ng-repeat="P in obj.IssueDetails" style="display:table;width:100%;	table-layout:fixed;">
                                            <td style="width: 70%">{{P.GEN_DESC}}</td>
                                            <td style="width: 10%">{{P.T_QUANTITY}}</td>
                                            <td style="width: 10%">{{P.SALE_PRICE}}</td>
                                            <td style="width: 10%">{{P.T_TOTAL_AMOUNT}}</td>

                                        </tr>
                                    </tbody>
                                    <tr style="background-color: #A21217; color: #ffffff;display:table;width:100%;">
                                        <td colspan="3" style="width: 90%">
                                            <label style="width: 100%; text-align: right">Sub Total</label>
                                        </td>

                                        <td style="width: 10%">
                                            <span>{{obj.pharmacyTotal}}</span>
                                        </td>
                                    </tr>
                                    <tr style="display:table;width:100%;">
                                        <td colspan="2" style="width: 80%">
                                            <label style="width: 100%; text-align: right">Discount</label>
                                        </td>
                                        <td style="width: 10%">
                                            <span>{{obj.Discount}} %</span>
                                        </td>
                                        <td style="width: 10%">
                                            <span>{{obj.totalDiscount}}</span>
                                        </td>
                                    </tr>
                                    <tr style="display:table;width:100%;">
                                        <td colspan="2" style="width: 80%">
                                            <label style="width: 100%; text-align: right"> Vat</label>
                                        </td>

                                        <td style="width: 10%">
                                            <span>{{obj.vat}} %</span>
                                        </td>
                                        <td style="width: 10%">
                                            <span>{{obj.totalVat}}</span>
                                        </td>
                                    </tr>
                                    <tr style="display:table;width:100%;">
                                        <td colspan="3" style="width: 80%">
                                            <label style="width: 100%; text-align: right">Grand Total</label>
                                        </td>
                                        <td style="width: 10%">
                                            <span></span>
                                        </td>
                                        <td style="width: 10%">
                                            <span>{{obj.GrandTotal}}</span>
                                        </td>
                                    </tr>
                                    <tr style="display:table;width:100%;">
                                        <td colspan="3" style="width: 80%">
                                            <label style="width: 100%; text-align: right">Final Total</label>
                                        </td>
                                        <!--@*<td style="width: 10%">
                                            <span></span>
                                        </td>*@-->
                                        <td style="width: 20%;text-align: right">
                                            <span>{{obj.FinalTotal }}</span>
                                        </td>
                                    </tr>
                                </table>

                            </div>
                        </div>
                    </form>
                </div>
            </div>
            <!--@*for popup end*@-->
        </div>
    </div>



</div>


